# Database
DATABASE_URL=postgresql://pricetracker:pricetracker123@localhost:5432/pricetracker

# Redis
REDIS_URL=redis://localhost:6379

# Server
PORT=3000
NODE_ENV=development
FRONTEND_URL=http://localhost:5173

# Session
SESSION_SECRET=your-super-secret-session-key-change-in-production

# Scraper settings
SCRAPE_INTERVAL_MINUTES=30
MAX_CONCURRENT_SCRAPES=5

# Circuit breaker settings
# Number of consecutive failures before opening the circuit
CIRCUIT_FAILURE_THRESHOLD=5
# Time in milliseconds before attempting to close a half-open circuit
CIRCUIT_HALF_OPEN_MS=60000

# Retry settings
# Maximum number of retry attempts for failed scrapes
SCRAPE_MAX_RETRIES=3
# Initial delay in milliseconds before first retry
SCRAPE_RETRY_INITIAL_DELAY_MS=1000
# Maximum delay cap in milliseconds between retries
SCRAPE_RETRY_MAX_DELAY_MS=30000
# Multiplier for each subsequent retry delay (exponential backoff)
SCRAPE_RETRY_MULTIPLIER=2

# Proxy settings (optional)
PROXY_HOST=
PROXY_PORT=
PROXY_USERNAME=
PROXY_PASSWORD=

# Rate limiting
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# Price history retention settings
# Days to keep full resolution data (hourly/per-scrape)
RETENTION_FULL_RESOLUTION_DAYS=7
# Days to keep daily aggregate data
RETENTION_AGGREGATE_DAYS=90
# Maximum age in days before data is deleted
RETENTION_MAX_AGE_DAYS=365
# Whether to archive deleted data (requires external storage setup)
RETENTION_ARCHIVE_ENABLED=false
# Batch size for deletion operations
RETENTION_DELETE_BATCH_SIZE=10000
# Hours between retention cleanup runs
RETENTION_CLEANUP_HOURS=24

# Logging
LOG_LEVEL=info
